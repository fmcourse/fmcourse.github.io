---
title: Практическое задание
---

Задание выполняется группой (5-6 человек).

Результатом работы является образ виртуальной машины
OVA со всеми инструментами, исходными текстами,
артефактами тестирования и отчетом.

## Вариант 1. IMA/EVM

Разработать систему динамической верификации
подсистем [Linux IMA/EVM](https://sourceforge.net/p/linux-ima/wiki/Home/)
при помощи среды Анис.

Что нужно сделать:

1. Ознакомиться с [моделью Event-B](model.tgz).
   Машины `DAC` и `DAC_EXT` описывают дискреционный уровень,
   `IMA` и `IMA_EXT` описывают уровень целостности.

1. Разработать монитор. Нужно взять
   [монитор для DAC](monitoring.tgz)
   и добавить в него поддержку IMA/EVM. Монитор разработан
   на основе kprobes/kretprobes и рассчитан на ядро Linux 5.15.

1. Написать тесты на pytest согласно
   [методике тестирования](test_method.pdf)
   (выделена желтым цветом в этом документе).
   В качестве примера есть [тесты для DAC](testing.tgz).

1. Выполнить тестирование ядра со сбором трасс.

1. Написать медиатор. В проекте с моделью Event-B есть
   медиатор для DAC, который нужно расширить уровнем
   целостности.

1. Создать проект Анис: загрузить модель, прописать константы,
   добиться выполнения тестов, сгенерированных по модели.

1. Добавить в проект Анис медиатор, загрузить трассы и
   выполнить проверку трасс на модели.
   Покрытие модели должно быть не менее 80% по строками и ветвям.
   Дополнить систему недостающими тестами, если покрытие модели
   меньше требуемого.

1. Подготовить отчет с оценкой трудоемкости
   и, возможно, предложениями по улучшению инструментов.


## Вариант 2. Smack

Разработать систему динамической верификации
подсистемы [Linux Smack](https://www.kernel.org/doc/html/latest/admin-guide/LSM/Smack.html) при помощи среды Анис.

Требуется поддержка только файловых системных вызовов
(сокеты, IPC поддерживать не нужно). Достаточно поддерживать
только встроенные правила доступа.

Что нужно сделать:

1. Ознакомиться с [моделью Event-B](model.tgz).
   Машины `DAC` и `DAC_EXT` описывают дискреционный уровень.
   Нужно добавить мандатный уровень Smack, расширяющий
   дискреционный уровень (аналогично тому, как это сделано для IMA).
   Необходимо поддерживать все системные вызовы, описанные
   на дискреционном уровне.
   В модели Event-B должна быть модель метки и в каждом системном
   вызове должны быть промоделированы правила доступа.

1. Разработать монитор. Нужно взять
   [монитор для DAC](monitoring.tgz)
   и добавить в него поддержку меток Smack. Монитор разработан
   на основе kprobes/kretprobes и рассчитан на ядро Linux 5.15.

1. Написать тесты на pytest согласно
   [методике тестирования](test_method.pdf).
   В качестве примера есть [тесты для DAC](testing.tgz).
   Тесты на целостность (выделены желтым) делать не нужно.

1. Выполнить тестирование ядра со сбором трасс.

1. Написать медиатор. В проекте с моделью Event-B есть
   медиатор для DAC, который нужно расширить мандатным уровнем.

1. Создать проект Анис: загрузить модель, прописать константы,
   добиться выполнения тестов, сгенерированных по модели.

1. Добавить в проект Анис медиатор, загрузить трассы и
   выполнить проверку трасс на модели.
   Покрытие модели должно быть не менее 80% по строками и ветвям.
   Дополнить систему недостающими тестами, если покрытие модели
   меньше требуемого.

1. Подготовить отчет с оценкой трудоемкости
   и, возможно, предложениями по улучшению инструментов.
